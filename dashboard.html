<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>

    <div id="app">
        <div>

            <canvas id="myChart"></canvas>

        </div>
    </div>


    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

        <script>
            // Import Vue and create the app
            Vue.createApp({
                data() {
                    return {};
                },
                methods: {
                    chartData() {
                        axios.get("http://127.0.0.1:5000/dashboard")
                            .then(response => {
                                const data = response.data;
                                const chartData = {
                                    labels: data.sales_data.map(item => item.date), // 
                                    datasets: [
                                        {
                                            label: 'Sales per day',
                                            data: data.sales_data.map(item => item.total_sales),
                                            backgroundColor: 'rgba(255, 99, 132, 0.2)',
                                            borderColor: 'rgba(255, 99, 132, 1)',
                                            borderWidth: 10
                                        }
                                        
                                    ]
                                }
                                const ctx = document.getElementById('myChart');
                                const myChart = new Chart(ctx, {
                                    type: 'line',
                                    data: chartData,
                                    options: {
                                        scales: {
                                            y: {
                                                beginAtZero: true
                                            }
                                        }
                                    }
                                });
                            })
                            .catch(error => {
                                console.error(error);
                            });
                    }
                },
    
                mounted() {
                    this.chartData();
                }
            }).mount('#app');
    
            
        </script>

    <!-- <script>
        // Import Vue and create the app
        Vue.createApp({
            data() {
                return {};
            },
            methods: {
                chartData() {

                    axios.get("http://127.0.0.1:5000/dashboard")
                        .then((response) => {
                            const data = response.data;
                            const chartData = {
                                labels: ["python", "javaScript", "Go"],
                                datasets: [
                                    {
                                        label: 'programing languages',
                                        data: [100, 200, 800, 900]
                                    }
                                ]
                            }
                            const ctx = document.getElementById('myChart');
                            const myChart = new Chart(ctx, {
                                type: 'line',
                                data: chartData,
                                options: {
                                    scales: {
                                        y: {
                                            beginAtZero: true
                                        }
                                    }
                                }
                            });
                        })
                        .catch(error => {
                            console.error(error);
                        });
                }
            },

            mounted() {
                this.chartData();
            }
        }).mount('#app');


    </script> -->

    <!-- <script>
        Vue.createApp({
            data() {
                return {

                }
            },
            methods: {
                line_chart() {
                    try {
                        axios.get("http://127.0.0.1:5000/dashboard")
                            .then((response) => {
                                this.dashboard = response.data.sales_data
                                console.log(this.dashboard)
                                // giving the canvas element a 2d context
                                var ctx = document.getElementById("mychart").getContext('2d')

                                // // create a new chart instance
                                new Chart(ctx, {
                                    type: 'line',
                                    data: {
                                        labels: ["python", "javaScript", "Go"],
                                        datasets: [
                                            {
                                                label: 'programming languages',
                                                data: [100, 200, 800, 900]
                                            }
                                        ]
                                    }
                                });

                            })
                            catch (error) {
                            console.log("error displaying chart...", error);
                        }
                    }

            },
                mounted() {
                    this.line_chart()
                }
            }).mount('#app')
    </script> -->
</body>

</html>